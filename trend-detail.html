<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¤å¤å›æ½® x æœªæ¥ç§‘æŠ€ - Z+æ½®æµç¤¾åŒº</title>
    <!-- å¼•å…¥å¤–éƒ¨èµ„æº -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/mobile-optimization.css" rel="stylesheet">
    <!-- å¼•å…¥ç”¨æˆ·ç®¡ç†æ¨¡å— -->
    <script src="js/userManager.js"></script>
    <!-- å¼•å…¥åŠ¨æ€ç®¡ç†æ¨¡å— -->
    <script src="js/postsManager.js"></script>
    <!-- å¼•å…¥æ‰‹åŠ¿ç®¡ç†æ¨¡å— -->
    <script src="js/gestureManager.js"></script>

    <!-- é…ç½®Tailwind CSS -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B35',
                        secondary: '#40BFFF',
                        accent: '#FF7DAB',
                        yellow: '#FFD166',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    }
                }
            }
        }
    </script>

    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            overflow-x: hidden;
            background: #f8fafc;
        }

        /* é¡¶éƒ¨å°é¢å›¾ - æ²‰æµ¸å¼è®¾è®¡ */
        .cover-container {
            position: relative;
            width: 100%;
            height: 60vh;
            min-height: 400px;
            overflow: hidden;
            background: #000;
        }

        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cover-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
            padding: 30px 20px;
            color: white;
        }

        /* ä¸‹æ‹‰æ”¾å¤§æ•ˆæœ */
        .cover-container.pulled .cover-image {
            transform: scale(1.1);
        }

        /* è¿”å›æŒ‰é’® */
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }

        /* å†…å®¹å¡ç‰‡ */
        .content-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* è¯é¢˜æ ‡ç­¾ */
        .topic-tag {
            display: inline-block;
            background: linear-gradient(135deg, #FF6B35, #FF7DAB);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            margin-right: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .topic-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }

        /* äº’åŠ¨æŒ‰é’® */
        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 12px 20px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            user-select: none;
        }

        .action-btn:hover {
            border-color: #FF6B35;
            background: #fff5f2;
            transform: translateY(-2px);
        }

        .action-btn.active {
            border-color: #FF6B35;
            background: #fff5f2;
        }

        .action-btn.liked {
            animation: heartBeat 0.6s ease-in-out;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(0.95); }
            75% { transform: scale(1.1); }
        }

        /* å›ºå®šåº•æ  */
        .fixed-bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid #e2e8f0;
            padding: 12px 20px;
            display: flex;
            gap: 12px;
            z-index: 999;
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.05);
        }

        .fixed-bottom-bar.show {
            transform: translateY(0);
        }

        /* è¯„è®ºåŒº */
        .comment-item {
            padding: 16px;
            border-bottom: 1px solid #f1f5f9;
            transition: background 0.2s;
        }

        .comment-item:hover {
            background: #f8fafc;
        }

        .reply-item {
            margin-left: 40px;
            margin-top: 12px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 3px solid #FF6B35;
        }

        /* å±•å¼€/æŠ˜å åŠ¨ç”» */
        .replies-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .replies-container.expanded {
            max-height: 1000px;
        }

        /* æ¨ªå‘æ»šåŠ¨å¡ç‰‡ */
        .horizontal-scroll {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            padding: 16px;
            scroll-snap-type: x mandatory;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .horizontal-scroll::-webkit-scrollbar {
            display: none;
        }

        .scroll-card {
            flex: 0 0 280px;
            scroll-snap-align: start;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s;
        }

        .scroll-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
        }

        /* åˆ†äº«é¢æ¿ */
        .share-panel {
            position: fixed;
            bottom: -300px;
            left: 0;
            right: 0;
            background: white;
            border-radius: 24px 24px 0 0;
            padding: 24px;
            box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            transition: bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .share-panel.show {
            bottom: 0;
        }

        .share-mask {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .share-mask.show {
            opacity: 1;
            pointer-events: all;
        }

        /* éœ‡åŠ¨åé¦ˆï¼ˆä»…ç§»åŠ¨ç«¯ï¼‰ */
        @media (hover: none) {
            .action-btn:active {
                transform: scale(0.95);
            }
        }

        /* å¹³æ»‘æ»šåŠ¨ */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
<!-- è¿”å›æŒ‰é’® -->
<button class="back-btn" onclick="goBack()">
    <i class="fa fa-arrow-left"></i>
</button>

<!-- é¡¶éƒ¨å°é¢åŒº -->
<div class="cover-container" id="coverContainer">
    <img src="https://picsum.photos/800/1200?random=100" alt="å°é¢å›¾" class="cover-image" id="coverImage">
    <div class="cover-overlay">
        <div class="flex items-center gap-2 mb-3">
            <span class="topic-tag">#è¡—å¤´æ—¶å°š</span>
            <span class="topic-tag">#å¤å¤æ½®æµ</span>
        </div>
        <h1 class="text-2xl font-bold mb-2">å¤å¤å›æ½® x æœªæ¥ç§‘æŠ€</h1>
        <div class="flex items-center gap-4 text-sm opacity-80">
            <div class="flex items-center gap-1">
                <img src="https://picsum.photos/32/32?random=201" alt="ä½œè€…" class="w-6 h-6 rounded-full">
                <span>æ½®æµè¾¾äººå°ç‹</span>
            </div>
            <span>2å°æ—¶å‰</span>
            <span><i class="fa fa-eye mr-1"></i>2.4k</span>
        </div>
    </div>
</div>

<!-- ä¸»å†…å®¹åŒº -->
<div class="pb-24">
    <!-- å†…å®¹ç®€ä»‹å¡ç‰‡ -->
    <div class="content-card">
        <h2 class="text-xl font-bold mb-4" style="color: #1E293B;">æ½®æµè§£è¯»</h2>
        <p class="text-gray-700 leading-relaxed mb-4">
            å°†90å¹´ä»£å¤å¤å…ƒç´ ä¸æœªæ¥ç§‘æŠ€æ„Ÿè®¾è®¡å®Œç¾èåˆï¼Œæ‰“é€ ç‹¬ç‰¹è§†è§‰å†²å‡»ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€ç§ç©¿æ­é£æ ¼ï¼Œæ›´æ˜¯ä¸€ç§ç”Ÿæ´»æ€åº¦çš„è¡¨è¾¾ã€‚
        </p>
        <p class="text-gray-700 leading-relaxed">
            ä»Y2Kåˆ°èµ›åšæœ‹å…‹ï¼Œä»éœ“è™¹ç¯åˆ°æœºèƒ½é£ï¼Œè¿™åœºå¤å¤ä¸æœªæ¥çš„ç¢°æ’ï¼Œæ­£åœ¨é‡æ–°å®šä¹‰00åçš„æ—¶å°šè¯­è¨€ã€‚ğŸ’«
        </p>
    </div>

    <!-- å›¾ç‰‡å±•ç¤ºå¡ç‰‡ -->
    <div class="content-card">
        <h3 class="text-lg font-bold mb-3" style="color: #1E293B;">æ½®æµå•å“æ¨è</h3>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <img src="https://picsum.photos/400/400?random=101" alt="å•å“1" class="w-full rounded-lg">
            <img src="https://picsum.photos/400/400?random=102" alt="å•å“2" class="w-full rounded-lg">
            <img src="https://picsum.photos/400/400?random=103" alt="å•å“3" class="w-full rounded-lg">
            <img src="https://picsum.photos/400/400?random=104" alt="å•å“4" class="w-full rounded-lg">
        </div>
        <p class="text-sm text-gray-600">
            <i class="fa fa-lightbulb-o mr-1" style="color: #FFD166;"></i>
            ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹è´­ä¹°é“¾æ¥
        </p>
    </div>

    <!-- å…³é”®ç‚¹å¡ç‰‡ -->
    <div class="content-card">
        <h3 class="text-lg font-bold mb-3" style="color: #1E293B;">ç©¿æ­è¦ç‚¹</h3>
        <div class="space-y-3">
            <div class="flex items-start gap-3">
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-white text-sm" style="background: linear-gradient(135deg, #FF6B35, #FF7DAB);">1</div>
                <div>
                    <h4 class="font-bold mb-1">è‰²å½©ç¢°æ’</h4>
                    <p class="text-sm text-gray-600">å¤§èƒ†ä½¿ç”¨å¯¹æ¯”è‰²ï¼Œæ‰“é€ è§†è§‰å†²å‡»</p>
                </div>
            </div>
            <div class="flex items-start gap-3">
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-white text-sm" style="background: linear-gradient(135deg, #FF6B35, #FF7DAB);">2</div>
                <div>
                    <h4 class="font-bold mb-1">æè´¨æ··æ­</h4>
                    <p class="text-sm text-gray-600">é‡‘å±è´¨æ„Ÿä¸å¤å¤é¢æ–™çš„å®Œç¾èåˆ</p>
                </div>
            </div>
            <div class="flex items-start gap-3">
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-white text-sm" style="background: linear-gradient(135deg, #FF6B35, #FF7DAB);">3</div>
                <div>
                    <h4 class="font-bold mb-1">é…é¥°ç‚¹ç›</h4>
                    <p class="text-sm text-gray-600">ç§‘æŠ€æ„Ÿé…é¥°æå‡æ•´ä½“é€ å‹è´¨æ„Ÿ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- äº’åŠ¨åŒº -->
    <div class="content-card" id="interactionSection">
        <div class="flex items-center justify-around py-4">
            <button class="action-btn" id="likeBtn" onclick="handleLike()">
                <i class="fa fa-heart-o text-2xl" id="likeIcon" style="color: #FF6B35;"></i>
                <span class="text-sm font-medium" id="likeCount">2.3k</span>
            </button>
            <button class="action-btn" id="favoriteBtn" onclick="handleFavorite()">
                <i class="fa fa-star-o text-2xl" id="favoriteIcon" style="color: #FFD166;"></i>
                <span class="text-sm font-medium" id="favoriteCount">856</span>
            </button>
            <button class="action-btn" onclick="showSharePanel()">
                <i class="fa fa-share-alt text-2xl" style="color: #40BFFF;"></i>
                <span class="text-sm font-medium">åˆ†äº«</span>
            </button>
            <button class="action-btn" onclick="scrollToComments()">
                <i class="fa fa-comment-o text-2xl" style="color: #FF7DAB;"></i>
                <span class="text-sm font-medium">324</span>
            </button>
        </div>
    </div>

    <!-- è¯„è®ºåŒº -->
    <div class="content-card" id="commentsSection">
        <h3 class="text-lg font-bold mb-4" style="color: #1E293B;">
            ç²¾å½©è¯„è®º <span class="text-base text-gray-500">(324)</span>
        </h3>

        <!-- è¯„è®º1 -->
        <div class="comment-item">
            <div class="flex items-start gap-3">
                <img src="https://picsum.photos/40/40?random=202" alt="ç”¨æˆ·" class="w-10 h-10 rounded-full flex-shrink-0">
                <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                        <span class="font-bold text-sm">æ—¶å°šå…ˆé”‹</span>
                        <span class="text-xs text-gray-500">3å°æ—¶å‰</span>
                    </div>
                    <p class="text-sm text-gray-700 mb-2">å¤ªé…·äº†ï¼è¿™ç§é£æ ¼æ­£æ˜¯æˆ‘æƒ³è¦çš„ï¼Œè¯·é—®è¡£æœåœ¨å“ªä¹°çš„ï¼Ÿ</p>
                    <div class="flex items-center gap-4 text-xs text-gray-500">
                        <button class="hover:text-primary" onclick="handleCommentLike(this)">
                            <i class="fa fa-thumbs-o-up mr-1"></i>128
                        </button>
                        <button class="hover:text-primary" onclick="toggleReplies('replies1')">
                            <i class="fa fa-comment-o mr-1"></i>å›å¤ (5)
                        </button>
                    </div>

                    <!-- æ¥¼ä¸­æ¥¼å›å¤ -->
                    <div class="replies-container" id="replies1">
                        <div class="reply-item">
                            <div class="flex items-start gap-2">
                                <img src="https://picsum.photos/32/32?random=203" alt="ç”¨æˆ·" class="w-8 h-8 rounded-full">
                                <div class="flex-1">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="font-bold text-sm">æ½®æµè¾¾äººå°ç‹</span>
                                        <span class="text-xs px-2 py-0.5 rounded-full text-white" style="background: #FF6B35;">ä½œè€…</span>
                                    </div>
                                    <p class="text-sm text-gray-700 mb-1">
                                        <span style="color: #40BFFF;">@æ—¶å°šå…ˆé”‹</span> è¯¦æƒ…é¡µåº•éƒ¨æœ‰è´­ä¹°é“¾æ¥å“¦ï½
                                    </p>
                                    <span class="text-xs text-gray-500">2å°æ—¶å‰</span>
                                </div>
                            </div>
                        </div>
                        <div class="reply-item">
                            <div class="flex items-start gap-2">
                                <img src="https://picsum.photos/32/32?random=204" alt="ç”¨æˆ·" class="w-8 h-8 rounded-full">
                                <div class="flex-1">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="font-bold text-sm">ç©¿æ­åšä¸»</span>
                                    </div>
                                    <p class="text-sm text-gray-700 mb-1">æˆ‘ä¹Ÿæƒ³çŸ¥é“å“ªé‡Œä¹°ï¼</p>
                                    <span class="text-xs text-gray-500">2å°æ—¶å‰</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¯„è®º2 -->
        <div class="comment-item">
            <div class="flex items-start gap-3">
                <img src="https://picsum.photos/40/40?random=205" alt="ç”¨æˆ·" class="w-10 h-10 rounded-full flex-shrink-0">
                <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                        <span class="font-bold text-sm">å¤å¤çˆ±å¥½è€…</span>
                        <span class="text-xs text-gray-500">5å°æ—¶å‰</span>
                    </div>
                    <p class="text-sm text-gray-700 mb-2">ç»ˆäºçœ‹åˆ°æœ‰äººæŠŠY2Kå’Œèµ›åšé£æ ¼ç»“åˆå¾—è¿™ä¹ˆå¥½äº†ï¼ğŸ‘</p>
                    <div class="flex items-center gap-4 text-xs text-gray-500">
                        <button class="hover:text-primary" onclick="handleCommentLike(this)">
                            <i class="fa fa-thumbs-o-up mr-1"></i>89
                        </button>
                        <button class="hover:text-primary" onclick="toggleReplies('replies2')">
                            <i class="fa fa-comment-o mr-1"></i>å›å¤ (2)
                        </button>
                    </div>

                    <div class="replies-container" id="replies2">
                        <div class="reply-item">
                            <div class="flex items-start gap-2">
                                <img src="https://picsum.photos/32/32?random=206" alt="ç”¨æˆ·" class="w-8 h-8 rounded-full">
                                <div class="flex-1">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="font-bold text-sm">è®¾è®¡å¸ˆå°æ</span>
                                    </div>
                                    <p class="text-sm text-gray-700 mb-1">
                                        <span style="color: #40BFFF;">@å¤å¤çˆ±å¥½è€…</span> å¯¹å¯¹å¯¹ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„fusionï¼
                                    </p>
                                    <span class="text-xs text-gray-500">4å°æ—¶å‰</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¯„è®º3 -->
        <div class="comment-item">
            <div class="flex items-start gap-3">
                <img src="https://picsum.photos/40/40?random=207" alt="ç”¨æˆ·" class="w-10 h-10 rounded-full flex-shrink-0">
                <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                        <span class="font-bold text-sm">æ½®æµå°ç™½</span>
                        <span class="text-xs text-gray-500">1å¤©å‰</span>
                    </div>
                    <p class="text-sm text-gray-700 mb-2">å¤ªé€‚åˆæˆ‘äº†ï¼å‡†å¤‡ç…§ç€ä¹°ä¸€å¥—ï½</p>
                    <div class="flex items-center gap-4 text-xs text-gray-500">
                        <button class="hover:text-primary" onclick="handleCommentLike(this)">
                            <i class="fa fa-thumbs-o-up mr-1"></i>56
                        </button>
                        <button class="hover:text-primary">
                            <i class="fa fa-comment-o mr-1"></i>å›å¤
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- æŸ¥çœ‹æ›´å¤šè¯„è®º -->
        <div class="text-center mt-4">
            <button class="px-6 py-2 rounded-full border-2 text-sm font-medium hover:bg-gray-50 transition" style="border-color: #FF6B35; color: #FF6B35;">
                æŸ¥çœ‹å…¨éƒ¨ 324 æ¡è¯„è®º
            </button>
        </div>
    </div>

    <!-- ç›¸å…³æ¨è -->
    <div class="mt-4">
        <div class="px-4 py-3 flex items-center justify-between">
            <h3 class="text-lg font-bold" style="color: #1E293B;">ç›¸å…³æ½®æµ</h3>
            <button class="text-sm" style="color: #FF6B35;">æ›´å¤š <i class="fa fa-angle-right"></i></button>
        </div>

        <div class="horizontal-scroll">
            <div class="scroll-card" onclick="location.href='trend-detail.html'">
                <img src="https://picsum.photos/280/200?random=110" alt="æ¨è1" class="w-full h-40 object-cover">
                <div class="p-3">
                    <h4 class="font-bold text-sm mb-1">ç‹¬ç«‹éŸ³ä¹å´›èµ·</h4>
                    <p class="text-xs text-gray-500 mb-2">å°ä¼—éŸ³ä¹æˆä¸ºæ–°æ½®æµ</p>
                    <div class="flex items-center justify-between text-xs text-gray-400">
                        <span><i class="fa fa-eye mr-1"></i>3.2k</span>
                        <span><i class="fa fa-heart mr-1"></i>890</span>
                    </div>
                </div>
            </div>

            <div class="scroll-card" onclick="location.href='trend-detail.html'">
                <img src="https://picsum.photos/280/200?random=111" alt="æ¨è2" class="w-full h-40 object-cover">
                <div class="p-3">
                    <h4 class="font-bold text-sm mb-1">æç®€ä¸»ä¹‰ç”Ÿæ´»</h4>
                    <p class="text-xs text-gray-500 mb-2">æ–­èˆç¦»æˆä¸ºæ–°æ½®æµ</p>
                    <div class="flex items-center justify-between text-xs text-gray-400">
                        <span><i class="fa fa-eye mr-1"></i>2.8k</span>
                        <span><i class="fa fa-heart mr-1"></i>756</span>
                    </div>
                </div>
            </div>

            <div class="scroll-card" onclick="location.href='trend-detail.html'">
                <img src="https://picsum.photos/280/200?random=112" alt="æ¨è3" class="w-full h-40 object-cover">
                <div class="p-3">
                    <h4 class="font-bold text-sm mb-1">ç”µç«æ–‡åŒ–</h4>
                    <p class="text-xs text-gray-500 mb-2">æ¸¸æˆæˆä¸ºç¤¾äº¤æ–°æ–¹å¼</p>
                    <div class="flex items-center justify-between text-xs text-gray-400">
                        <span><i class="fa fa-eye mr-1"></i>4.1k</span>
                        <span><i class="fa fa-heart mr-1"></i>1.2k</span>
                    </div>
                </div>
            </div>

            <div class="scroll-card" onclick="location.href='trend-detail.html'">
                <img src="https://picsum.photos/280/200?random=113" alt="æ¨è4" class="w-full h-40 object-cover">
                <div class="p-3">
                    <h4 class="font-bold text-sm mb-1">å¥åº·è½»é£Ÿ</h4>
                    <p class="text-xs text-gray-500 mb-2">ä½è„‚é«˜é¢œå€¼é¥®é£Ÿæ–°é€‰æ‹©</p>
                    <div class="flex items-center justify-between text-xs text-gray-400">
                        <span><i class="fa fa-eye mr-1"></i>2.5k</span>
                        <span><i class="fa fa-heart mr-1"></i>678</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- å›ºå®šåº•æ  -->
<div class="fixed-bottom-bar" id="fixedBar">
    <button class="action-btn flex-1" onclick="handleLike()">
        <i class="fa fa-heart-o text-xl" style="color: #FF6B35;"></i>
    </button>
    <button class="action-btn flex-1" onclick="handleFavorite()">
        <i class="fa fa-star-o text-xl" style="color: #FFD166;"></i>
    </button>
    <button class="action-btn flex-1" onclick="showSharePanel()">
        <i class="fa fa-share-alt text-xl" style="color: #40BFFF;"></i>
    </button>
    <button class="flex-1 py-3 rounded-full text-white font-medium" style="background: linear-gradient(135deg, #FF6B35, #FF7DAB);" onclick="scrollToComments()">
        å†™è¯„è®º
    </button>
</div>

<!-- åˆ†äº«é¢æ¿ -->
<div class="share-mask" id="shareMask" onclick="hideSharePanel()"></div>
<div class="share-panel" id="sharePanel">
    <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-bold">åˆ†äº«åˆ°</h3>
        <button onclick="hideSharePanel()" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center">
            <i class="fa fa-times"></i>
        </button>
    </div>

    <div class="grid grid-cols-4 gap-4 mb-4">
        <button class="flex flex-col items-center gap-2" onclick="share('wechat')">
            <div class="w-14 h-14 rounded-full flex items-center justify-center" style="background: #07C160;">
                <i class="fa fa-wechat text-white text-2xl"></i>
            </div>
            <span class="text-xs">å¾®ä¿¡</span>
        </button>
        <button class="flex flex-col items-center gap-2" onclick="share('moments')">
            <div class="w-14 h-14 rounded-full flex items-center justify-center" style="background: #1AAD19;">
                <i class="fa fa-users text-white text-2xl"></i>
            </div>
            <span class="text-xs">æœ‹å‹åœˆ</span>
        </button>
        <button class="flex flex-col items-center gap-2" onclick="share('weibo')">
            <div class="w-14 h-14 rounded-full flex items-center justify-center" style="background: #E6162D;">
                <i class="fa fa-weibo text-white text-2xl"></i>
            </div>
            <span class="text-xs">å¾®åš</span>
        </button>
        <button class="flex flex-col items-center gap-2" onclick="share('copy')">
            <div class="w-14 h-14 rounded-full flex items-center justify-center" style="background: #8B8B8B;">
                <i class="fa fa-link text-white text-2xl"></i>
            </div>
            <span class="text-xs">å¤åˆ¶é“¾æ¥</span>
        </button>
    </div>
</div>

<script>
    // è¿”å›åŠŸèƒ½
    function goBack() {
        // å¦‚æœæ˜¯ä»é¦–é¡µè¿›æ¥çš„ï¼Œç›´æ¥è¿”å›
        if (document.referrer.includes('index.html') || document.referrer.includes(window.location.origin)) {
            window.history.back();
        } else {
            // å¦åˆ™è·³è½¬åˆ°é¦–é¡µ
            window.location.href = 'index.html';
        }
    }

    // å°é¢ä¸‹æ‹‰æ”¾å¤§æ•ˆæœ
    let startY = 0;
    let currentY = 0;
    let isDragging = false;
    const coverContainer = document.getElementById('coverContainer');
    const coverImage = document.getElementById('coverImage');

    coverContainer.addEventListener('touchstart', (e) => {
        if (window.scrollY === 0) {
            startY = e.touches[0].clientY;
            isDragging = true;
        }
    });

    coverContainer.addEventListener('touchmove', (e) => {
        if (isDragging && window.scrollY === 0) {
            currentY = e.touches[0].clientY;
            const diff = currentY - startY;

            if (diff > 0) {
                e.preventDefault();
                const scale = 1 + (diff / 500);
                coverImage.style.transform = `scale(${Math.min(scale, 1.3)})`;
            }
        }
    });

    coverContainer.addEventListener('touchend', () => {
        isDragging = false;
        coverImage.style.transform = 'scale(1)';
    });

    // å›ºå®šåº•æ æ˜¾ç¤º/éšè—
    const fixedBar = document.getElementById('fixedBar');
    const interactionSection = document.getElementById('interactionSection');

    let lastScrollY = window.scrollY;

    window.addEventListener('scroll', () => {
        const interactionRect = interactionSection.getBoundingClientRect();

        // å½“äº’åŠ¨åŒºæ»šå‡ºè§†çª—æ—¶æ˜¾ç¤ºå›ºå®šåº•æ 
        if (interactionRect.bottom < 0) {
            fixedBar.classList.add('show');
        } else {
            fixedBar.classList.remove('show');
        }

        lastScrollY = window.scrollY;
    });

    // ç‚¹èµåŠŸèƒ½
    let isLiked = false;
    function handleLike() {
        const likeBtn = document.getElementById('likeBtn');
        const likeIcon = document.getElementById('likeIcon');
        const likeCount = document.getElementById('likeCount');

        if (!isLiked) {
            likeIcon.className = 'fa fa-heart text-2xl';
            likeBtn.classList.add('liked', 'active');
            likeCount.textContent = '2.4k';

            // éœ‡åŠ¨åé¦ˆï¼ˆä»…æ”¯æŒçš„è®¾å¤‡ï¼‰
            if ('vibrate' in navigator) {
                navigator.vibrate(50);
            }

            // ç§»é™¤åŠ¨ç”»ç±»ä»¥ä¾¿ä¸‹æ¬¡è§¦å‘
            setTimeout(() => {
                likeBtn.classList.remove('liked');
            }, 600);
        } else {
            likeIcon.className = 'fa fa-heart-o text-2xl';
            likeBtn.classList.remove('active');
            likeCount.textContent = '2.3k';
        }

        isLiked = !isLiked;
    }

    // æ”¶è—åŠŸèƒ½
    let isFavorited = false;
    function handleFavorite() {
        const favoriteBtn = document.getElementById('favoriteBtn');
        const favoriteIcon = document.getElementById('favoriteIcon');
        const favoriteCount = document.getElementById('favoriteCount');

        if (!isFavorited) {
            favoriteIcon.className = 'fa fa-star text-2xl';
            favoriteBtn.classList.add('active');
            favoriteCount.textContent = '857';

            // éœ‡åŠ¨åé¦ˆ
            if ('vibrate' in navigator) {
                navigator.vibrate(50);
            }
        } else {
            favoriteIcon.className = 'fa fa-star-o text-2xl';
            favoriteBtn.classList.remove('active');
            favoriteCount.textContent = '856';
        }

        isFavorited = !isFavorited;
    }

    // æ»šåŠ¨åˆ°è¯„è®ºåŒº
    function scrollToComments() {
        document.getElementById('commentsSection').scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
    }

    // å±•å¼€/æŠ˜å å›å¤
    function toggleReplies(id) {
        const repliesContainer = document.getElementById(id);
        repliesContainer.classList.toggle('expanded');
    }

    // è¯„è®ºç‚¹èµ
    function handleCommentLike(button) {
        const icon = button.querySelector('i');
        const isLiked = icon.classList.contains('fa-thumbs-up');

        if (isLiked) {
            icon.classList.replace('fa-thumbs-up', 'fa-thumbs-o-up');
        } else {
            icon.classList.replace('fa-thumbs-o-up', 'fa-thumbs-up');
        }

        // éœ‡åŠ¨åé¦ˆ
        if ('vibrate' in navigator) {
            navigator.vibrate(30);
        }
    }

    // æ˜¾ç¤ºåˆ†äº«é¢æ¿
    function showSharePanel() {
        document.getElementById('shareMask').classList.add('show');
        document.getElementById('sharePanel').classList.add('show');
        document.body.style.overflow = 'hidden';
    }

    // éšè—åˆ†äº«é¢æ¿
    function hideSharePanel() {
        document.getElementById('shareMask').classList.remove('show');
        document.getElementById('sharePanel').classList.remove('show');
        document.body.style.overflow = 'auto';
    }

    // åˆ†äº«åŠŸèƒ½
    function share(platform) {
        const title = 'å¤å¤å›æ½® x æœªæ¥ç§‘æŠ€ - Z+æ½®æµç¤¾åŒº';
        const url = window.location.href;

        switch(platform) {
            case 'copy':
                navigator.clipboard.writeText(url).then(() => {
                    alert('é“¾æ¥å·²å¤åˆ¶ï¼');
                    hideSharePanel();
                });
                break;
            case 'wechat':
            case 'moments':
            case 'weibo':
                alert(`åˆ†äº«åˆ°${platform === 'wechat' ? 'å¾®ä¿¡' : platform === 'moments' ? 'æœ‹å‹åœˆ' : 'å¾®åš'}åŠŸèƒ½å¼€å‘ä¸­...`);
                break;
        }
    }

    // é•¿æŒ‰åˆ†äº«
    let longPressTimer;
    document.querySelectorAll('.content-card').forEach(card => {
        card.addEventListener('touchstart', (e) => {
            longPressTimer = setTimeout(() => {
                if ('vibrate' in navigator) {
                    navigator.vibrate(50);
                }
                showSharePanel();
            }, 800);
        });

        card.addEventListener('touchend', () => {
            clearTimeout(longPressTimer);
        });

        card.addEventListener('touchmove', () => {
            clearTimeout(longPressTimer);
        });
    });
</script>
</body>
</html>
